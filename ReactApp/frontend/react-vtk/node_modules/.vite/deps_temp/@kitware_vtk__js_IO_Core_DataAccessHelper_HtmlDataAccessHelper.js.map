{
  "version": 3,
  "sources": ["../../@kitware/vtk.js/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js", "dep:@kitware_vtk__js_IO_Core_DataAccessHelper_HtmlDataAccessHelper"],
  "sourcesContent": ["import { strFromU8, decompressSync } from 'fflate';\nimport macro from '../../../macros.js';\nimport Base64 from '../../../Common/Core/Base64.js';\nimport Endian from '../../../Common/Core/Endian.js';\nimport { DataTypeByteSize } from '../../../Common/Core/DataArray/Constants.js';\nimport { registerType } from '../DataAccessHelper.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro,\n    vtkDebugMacro = macro.vtkDebugMacro;\nvar requestCount = 0;\n\nfunction getContent(url) {\n  var el = document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n  return el ? el.innerHTML : null;\n}\n\nfunction getElement(url) {\n  return document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n}\n\nfunction removeLeadingSlash(str) {\n  return str[0] === '/' ? str.substr(1) : str;\n}\n\nfunction fetchText(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(\"No such text \".concat(url)));\n    } else {\n      resolve(txt);\n    }\n  });\n}\n\nfunction fetchJSON(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(removeLeadingSlash(url));\n\n    if (txt === null) {\n      reject(new Error(\"No such JSON \".concat(url)));\n    } else {\n      resolve(JSON.parse(txt));\n    }\n  });\n}\n\nfunction fetchArray(instance, baseURL, array) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return new Promise(function (resolve, reject) {\n    var url = removeLeadingSlash([baseURL, array.ref.basepath, options.compression ? \"\".concat(array.ref.id, \".gz\") : array.ref.id].join('/'));\n    var txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(\"No such array \".concat(url)));\n    } else {\n      if (array.dataType === 'string') {\n        var bText = atob(txt);\n\n        if (options.compression) {\n          bText = strFromU8(decompressSync(bText));\n        }\n\n        array.values = JSON.parse(bText);\n      } else {\n        var uint8array = new Uint8Array(Base64.toArrayBuffer(txt));\n        array.buffer = new ArrayBuffer(uint8array.length); // copy uint8array to buffer\n\n        var view = new Uint8Array(array.buffer);\n        view.set(uint8array);\n\n        if (options.compression) {\n          if (array.dataType === 'string' || array.dataType === 'JSON') {\n            array.buffer = strFromU8(decompressSync(new Uint8Array(array.buffer)));\n          } else {\n            array.buffer = decompressSync(new Uint8Array(array.buffer)).buffer;\n          }\n        }\n\n        if (array.ref.encode === 'JSON') {\n          array.values = JSON.parse(array.buffer);\n        } else {\n          if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n            // Need to swap bytes\n            vtkDebugMacro(\"Swap bytes of \".concat(array.name));\n            Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n          }\n\n          array.values = macro.newTypedArray(array.dataType, array.buffer);\n        }\n\n        if (array.values.length !== array.size) {\n          vtkErrorMacro(\"Error in FetchArray: \".concat(array.name, \" does not have the proper array size. Got \").concat(array.values.length, \", instead of \").concat(array.size));\n        }\n      } // Done with the ref and work\n\n\n      delete array.ref;\n\n      if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n        instance.invokeBusy(false);\n      }\n\n      if (instance !== null && instance !== void 0 && instance.modified) {\n        instance.modified();\n      }\n\n      resolve(array);\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchImage(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var img = getElement(url);\n\n    if (img) {\n      resolve(img);\n    } else {\n      reject(new Error(\"No such image \".concat(url)));\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nvar HtmlDataAccessHelper = {\n  fetchJSON: fetchJSON,\n  fetchText: fetchText,\n  fetchArray: fetchArray,\n  fetchImage: fetchImage\n};\nregisterType('html', function (options) {\n  return HtmlDataAccessHelper;\n}); // Export fetch methods\n\nexport { HtmlDataAccessHelper as default };\n", "import d from \"./node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\";export default d;"],
  "mappings": "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",
  "names": []
}
