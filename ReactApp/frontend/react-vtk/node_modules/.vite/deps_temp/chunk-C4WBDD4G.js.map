{
  "version": 3,
  "sources": ["../../@kitware/vtk.js/Rendering/Core/Actor.js"],
  "sourcesContent": ["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { mat4, vec3 } from 'gl-matrix';\nimport macro from '../../macros.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\nimport vtkProp3D from './Prop3D.js';\nimport vtkProperty from './Property.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar vtkDebugMacro = macro.vtkDebugMacro; // ----------------------------------------------------------------------------\n// vtkActor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkActor'); // Capture 'parentClass' api for internal use\n\n  var superClass = _objectSpread({}, publicAPI);\n\n  publicAPI.getActors = function () {\n    return [publicAPI];\n  };\n\n  publicAPI.getIsOpaque = function () {\n    if (model.forceOpaque) {\n      return true;\n    }\n\n    if (model.forceTranslucent) {\n      return false;\n    } // make sure we have a property\n\n\n    if (!model.property) {\n      // force creation of a property\n      publicAPI.getProperty();\n    }\n\n    var isOpaque = model.property.getOpacity() >= 1.0; // are we using an opaque texture, if any?\n\n    isOpaque = isOpaque && (!model.texture || !model.texture.isTranslucent()); // are we using an opaque scalar array, if any?\n\n    isOpaque = isOpaque && (!model.mapper || model.mapper.getIsOpaque());\n    return isOpaque;\n  };\n\n  publicAPI.hasTranslucentPolygonalGeometry = function () {\n    if (model.mapper === null) {\n      return false;\n    } // make sure we have a property\n\n\n    if (model.property === null) {\n      // force creation of a property\n      publicAPI.setProperty(publicAPI.makeProperty());\n    } // is this actor opaque ?\n\n\n    return !publicAPI.getIsOpaque();\n  };\n\n  publicAPI.makeProperty = vtkProperty.newInstance;\n\n  publicAPI.getProperty = function () {\n    if (model.property === null) {\n      model.property = publicAPI.makeProperty();\n    }\n\n    return model.property;\n  };\n\n  publicAPI.getBounds = function () {\n    if (model.mapper === null) {\n      return model.bounds;\n    } // Check for the special case when the mapper's bounds are unknown\n\n\n    var bds = model.mapper.getBounds();\n\n    if (!bds || bds.length !== 6) {\n      return bds;\n    } // Check for the special case when the actor is empty.\n\n\n    if (bds[0] > bds[1]) {\n      model.mapperBounds = bds.concat(); // copy the mapper's bounds\n\n      model.bounds = [1, -1, 1, -1, 1, -1];\n      model.boundsMTime.modified();\n      return bds;\n    } // Check if we have cached values for these bounds - we cache the\n    // values returned by model.mapper.getBounds() and we store the time\n    // of caching. If the values returned this time are different, or\n    // the modified time of this class is newer than the cached time,\n    // then we need to rebuild.\n\n\n    if (!model.mapperBounds || bds[0] !== model.mapperBounds[0] || bds[1] !== model.mapperBounds[1] || bds[2] !== model.mapperBounds[2] || bds[3] !== model.mapperBounds[3] || bds[4] !== model.mapperBounds[4] || bds[5] !== model.mapperBounds[5] || publicAPI.getMTime() > model.boundsMTime.getMTime()) {\n      vtkDebugMacro('Recomputing bounds...');\n      model.mapperBounds = bds.concat(); // copy the mapper's bounds\n\n      var bbox = [];\n      vtkBoundingBox.getCorners(bds, bbox);\n      publicAPI.computeMatrix();\n      var tmp4 = new Float64Array(16);\n      mat4.transpose(tmp4, model.matrix);\n      bbox.forEach(function (pt) {\n        return vec3.transformMat4(pt, pt, tmp4);\n      });\n      /* eslint-disable no-multi-assign */\n\n      model.bounds[0] = model.bounds[2] = model.bounds[4] = Number.MAX_VALUE;\n      model.bounds[1] = model.bounds[3] = model.bounds[5] = -Number.MAX_VALUE;\n      /* eslint-enable no-multi-assign */\n\n      model.bounds = model.bounds.map(function (d, i) {\n        return i % 2 === 0 ? bbox.reduce(function (a, b) {\n          return a > b[i / 2] ? b[i / 2] : a;\n        }, d) : bbox.reduce(function (a, b) {\n          return a < b[(i - 1) / 2] ? b[(i - 1) / 2] : a;\n        }, d);\n      });\n      model.boundsMTime.modified();\n    }\n\n    return model.bounds;\n  };\n\n  publicAPI.getMTime = function () {\n    var mt = superClass.getMTime();\n\n    if (model.property !== null) {\n      var time = model.property.getMTime();\n      mt = time > mt ? time : mt;\n    }\n\n    if (model.backfaceProperty !== null) {\n      var _time = model.backfaceProperty.getMTime();\n\n      mt = _time > mt ? _time : mt;\n    }\n\n    return mt;\n  };\n\n  publicAPI.getRedrawMTime = function () {\n    var mt = model.mtime;\n\n    if (model.mapper !== null) {\n      var time = model.mapper.getMTime();\n      mt = time > mt ? time : mt;\n\n      if (model.mapper.getInput() !== null) {\n        // FIXME !!! getInputAlgorithm / getInput\n        model.mapper.getInputAlgorithm().update();\n        time = model.mapper.getInput().getMTime();\n        mt = time > mt ? time : mt;\n      }\n    }\n\n    return mt;\n  };\n\n  publicAPI.getSupportsSelection = function () {\n    return model.mapper ? model.mapper.getSupportsSelection() : false;\n  };\n\n  publicAPI.processSelectorPixelBuffers = function (selector, pixelOffsets) {\n    if (model.mapper && model.mapper.processSelectorPixelBuffers) {\n      model.mapper.processSelectorPixelBuffers(selector, pixelOffsets);\n    }\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  mapper: null,\n  property: null,\n  backfaceProperty: null,\n  forceOpaque: false,\n  forceTranslucent: false,\n  bounds: [1, -1, 1, -1, 1, -1]\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  vtkProp3D.extend(publicAPI, model, initialValues); // vtkTimeStamp\n\n  model.boundsMTime = {};\n  macro.obj(model.boundsMTime); // Build VTK API\n\n  macro.set(publicAPI, model, ['property']);\n  macro.setGet(publicAPI, model, ['backfaceProperty', 'forceOpaque', 'forceTranslucent', 'mapper']); // Object methods\n\n  vtkActor(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkActor'); // ----------------------------------------------------------------------------\n\nvar vtkActor$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkActor$1 as default, extend, newInstance };\n"],
  "mappings": "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",
  "names": []
}
